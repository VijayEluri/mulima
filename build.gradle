plugins {
  id 'application'
  id 'groovy'
  id 'org.ajoberstar.grgit' version '3.0.0'
  id 'org.ajoberstar.reckon' version '0.9.0'
  id 'com.diffplug.gradle.spotless' version '3.16.0'
}

apply from: 'gradle/locking.gradle'

group = 'org.ajoberstar'

mainClassName = 'org.mulima.main.Mulima'
sourceCompatibility = 11

reckon {
  scopeFromProp()
  stageFromProp('beta', 'rc', 'final')
}

repositories { mavenCentral() }

dependencies {
  implementation 'org.slf4j:slf4j-api:1.7.22'
  implementation 'org.springframework:spring-context:4.3.5.RELEASE'
  implementation 'commons-codec:commons-codec:1.10'

  runtimeOnly 'org.slf4j:jcl-over-slf4j:1.7.22'
  runtimeOnly 'ch.qos.logback:logback-classic:1.1.8'

  implementation 'org.codehaus.groovy:groovy-all:2.4.7'
  implementation 'commons-cli:commons-cli:1.3.1'

  testImplementation 'junit:junit:4.12'
  testImplementation 'org.mockito:mockito-core:2.5.5'
  testImplementation 'org.spockframework:spock-core:1.0-groovy-2.4'
  testRuntimeOnly 'cglib:cglib:3.2.4'
}


spotless {
  java {
    importOrder 'java', 'javax', ''
    removeUnusedImports()
    eclipse().configFile(project.rootProject.file('gradle/eclipse-java-formatter.xml'))
  }
  groovyGradle {
    target '**/*.gradle'
    greclipse().configFile(project.rootProject.file('gradle/eclipse-java-formatter.xml'))
  }
}
