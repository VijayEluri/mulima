buildscript {
	repositories {
		mavenCentral()
		mavenRepo(name:'sonatype', urls:['https://oss.sonatype.org/content/groups/public/'])
	}
	dependencies {
		classpath group:'org.ajoberstar', name:'gradle-plugins', version:'0.1.1'
	}
}

apply plugin: 'groovy'
apply plugin: 'code-quality' 
apply plugin: 'jdepend'
apply plugin: 'pmd'
apply plugin: 'findbugs'
apply plugin: 'eclipse'
apply from: 'emma.gradle'

group = 'org.ajoberstar'
version = '0.1.0.SNAPSHOT'

sourceCompatibility = '1.6'

checkstyleMain.ignoreFailures = true
checkstyleTest.ignoreFailures = true
findbugsMain.ignoreFailures = true
findbugsTest.ignoreFailures = true
pmdMain.ignoreFailures = true
pmdTest.ignoreFailures = true

codeNarcConfigFileName = 'config/codenarc/codenarc.groovy'

convention.plugins.pmd.rulesets 'config/pmd/rulesets.xml'

repositories {
	mavenCentral()
}

dependencies {
	compile (
		[group:'org.slf4j', name:'slf4j-api', version:'1.6.1'],
		[group:'org.springframework', name:'spring-context', version:'3.0.5.RELEASE'],
		[group:'org.springframework', name:'spring-jdbc', version:'3.0.5.RELEASE'],
		[group:'org.springframework', name:'spring-tx', version:'3.0.5.RELEASE'],
		[group:'org.apache.commons', name:'commons-compress', version:'1.1']
	)
	
	runtime (
		[group:'org.slf4j', name:'jcl-over-slf4j', version:'1.6.1'],
		[group:'ch.qos.logback', name:'logback-classic', version:'0.9.28'],
		[group:'mysql', name:'mysql-connector-java', version:'5.1.13']
	)
	
	groovy (
		[group:'org.codehaus.groovy', name:'groovy-all', version:'1.7.5']
	)
	
	findbugs (
		[group:'com.google.code.findbugs', name:'findbugs', version:'1.3.9'],
		[group:'com.google.code.findbugs', name:'findbugs-ant', version:'1.3.9']
	)
	
	pmd (
		[group:'pmd', name:'pmd', version:'4.2.5']	
	)
	
	emma (
		[group:'emma', name:'emma', version:'2.0.5312'],
		[group:'emma', name:'emma_ant', version:'2.0.5312']
	)
	
	jdepend (
		[group:'jdepend', name:'jdepend', version:'2.9.1'],
		[group:'org.apache.ant', name:'ant-jdepend', version:'1.7.1']	
	)
	
	testCompile(
		[group:'junit', name:'junit', version:'4.8.2'],
		[group:'org.mockito', name:'mockito-core', version:'1.8.5']
	)
}

task stageLib(type:Sync, dependsOn:assemble) {
	from configurations.archives.allArtifactFiles
	from configurations.runtime
	into file('C:/data/library/lib')
}
	
task stage(dependsOn:stageLib)
